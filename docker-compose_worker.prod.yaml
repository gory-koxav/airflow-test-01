# =============================================================================
# PROD Environment Override - Worker
# =============================================================================
# Layer: docker-compose_worker.yaml + THIS FILE (+ gpu.yaml if WORKER_GPU=true)
#
# Purpose: Network configuration for production (separate machines)
#
# Shared Storage:
#   HOST_DATA_PATH=/mnt/airflow-data (NFS mount, set in worker env files)
#
# NFS Setup (run on each worker host before starting):
#   sudo mkdir -p /mnt/airflow-data
#   sudo mount -t nfs <NFS_SERVER>:/exports/airflow-data /mnt/airflow-data
# =============================================================================

networks:
  worker-network:
    driver: bridge

services:
  airflow-worker:
    extra_hosts:
      - "main-server:${MAIN_SERVER_IP}"
      - "postgres:${POSTGRES_HOST}"
      - "redis:${REDIS_HOST}"
