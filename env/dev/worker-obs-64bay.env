# ============================================
# DEV Environment - Observer Worker for 64bay
# ============================================
# For development: workers connect via Docker internal network
# Using container hostnames and internal ports

# Custom Docker image for Observer (GPU + ML packages)
AIRFLOW_IMAGE_NAME=airflow-observer:latest

# Connection to Main Server (Docker internal network)
# In dev, workers share the same Docker network as main server
POSTGRES_HOST=postgres
REDIS_HOST=redis

# Internal container ports (NOT host ports!)
# Workers connect directly to containers via Docker network
POSTGRES_PORT=5432
REDIS_PORT=6379

# Worker Identification
WORKER_NAME=obs-64bay
WORKER_CLASS=sync

# ============================================
# Queue Configuration
# ============================================
# This worker handles observation tasks for 64bay
# Queue naming convention:
#   - Observer: obs_{bay_id}  (e.g., obs_64bay)
WORKER_QUEUES=obs_64bay

# Worker Performance Configuration
WORKER_CONCURRENCY=8
WORKER_AUTOSCALE=16,8
WORKER_MAX_TASKS_PER_CHILD=100
WORKER_PREFETCH_MULTIPLIER=1

# Resource Limits (Observer needs more resources for ML inference)
WORKER_CPU_LIMIT=4
WORKER_CPU_RESERVATION=2
WORKER_MEMORY_LIMIT=8G
WORKER_MEMORY_RESERVATION=4G

# GPU Configuration (Observer workers need GPU for AI inference)
WORKER_GPU=true
WORKER_GPU_COUNT=1

# Monitoring ports (optional)
NODE_EXPORTER_PORT=9100
CADVISOR_PORT=8081

# ============================================
# Shared Storage Configuration (DEV)
# ============================================
# DEV: Use local ./data folder (project directory)
# This folder is mounted to all containers via Docker volume
# Workers share the same ./data folder as main server
HOST_DATA_PATH=./data
