# ============================================
# DEV Environment - Processor Worker for 64bay
# ============================================
# For development: workers connect via Docker internal network
# Using container hostnames and internal ports

# Custom Docker image for Processor (lightweight, no ML packages)
AIRFLOW_IMAGE_NAME=airflow-processor:latest

# Connection to Main Server (Docker internal network)
# In dev, workers share the same Docker network as main server
POSTGRES_HOST=postgres
REDIS_HOST=redis

# Internal container ports (NOT host ports!)
# Workers connect directly to containers via Docker network
POSTGRES_PORT=5432
REDIS_PORT=6379

# Worker Identification
WORKER_NAME=proc-12bay-west
WORKER_CLASS=sync

# ============================================
# Queue Configuration
# ============================================
# This worker handles fusion and tracking tasks for 64bay
# Queue naming convention:
#   - Processor: proc_{bay_id} (e.g., proc_64bay)
WORKER_QUEUES=proc_12bay-west

# Worker Performance Configuration
WORKER_CONCURRENCY=8
WORKER_AUTOSCALE=16,8
WORKER_MAX_TASKS_PER_CHILD=100
WORKER_PREFETCH_MULTIPLIER=1

# Resource Limits (Processor is lighter than Observer)
WORKER_CPU_LIMIT=2
WORKER_CPU_RESERVATION=1
WORKER_MEMORY_LIMIT=4G
WORKER_MEMORY_RESERVATION=2G

# Monitoring ports (optional)
NODE_EXPORTER_PORT=9103
CADVISOR_PORT=8084

# ============================================
# Shared Storage Configuration (DEV)
# ============================================
# DEV: Use local ./data folder (project directory)
# This folder is mounted to all containers via Docker volume
# Workers share the same ./data folder as main server
HOST_DATA_PATH=./data
