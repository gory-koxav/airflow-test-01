# ============================================
# DEV Environment - Worker 2 Configuration
# ============================================
# For development: workers connect via Docker internal network
# Using container hostnames and internal ports

# Connection to Main Server (Docker internal network)
# In dev, workers share the same Docker network as main server
POSTGRES_HOST=postgres
REDIS_HOST=redis

# Internal container ports (NOT host ports!)
# Workers connect directly to containers via Docker network
POSTGRES_PORT=5432
REDIS_PORT=6379

# Worker Identification (unique name for this worker)
WORKER_NAME=processor-dev-12bay
WORKER_CLASS=sync

# ============================================
# Queue Configuration
# ============================================
# This worker handles fusion/tracking tasks for 12bay
# Queue naming convention:
#   - Observer: obs_{bay_id}  (e.g., obs_12bay)
#   - Processor: proc_{bay_id} (e.g., proc_12bay)
WORKER_QUEUES=proc_12bay

# Worker Performance Configuration
WORKER_CONCURRENCY=8
WORKER_AUTOSCALE=16,8
WORKER_MAX_TASKS_PER_CHILD=100
WORKER_PREFETCH_MULTIPLIER=1

# Resource Limits (adjust based on dev machine specs)
WORKER_CPU_LIMIT=4
WORKER_CPU_RESERVATION=2
WORKER_MEMORY_LIMIT=8G
WORKER_MEMORY_RESERVATION=4G

# Monitoring ports (optional - different from worker1 to avoid conflicts)
NODE_EXPORTER_PORT=9101
CADVISOR_PORT=8082

# ============================================
# Shared Storage Configuration (DEV)
# ============================================
# DEV: Use local ./data folder (project directory)
# This folder is mounted to all containers via Docker volume
# Workers share the same ./data folder as main server
HOST_DATA_PATH=./data